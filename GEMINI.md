# Gemini CLI 规则：微前端（MF）框架调优

以下是在本次对话中需要遵守的规则，用于指导对当前微前端（MF）架构的性能分析和代码调优。

## 规则列表

1.  **记录调试过程**: 每次进行调优时，必须在 `docs/` 目录下的 `DEBUGGING_JOURNEY.md` 文档中，详细记录本次遇到的问题、分析过程、尝试的解决方案以及最终结论。

2.  **源码分析与文档沉淀**: 当遇到 Garfish 的具体实现细节不明确时，优先分析 `packages/garfish-source` 中的源码。分析完成后，应将核心发现和结论更新到 `docs/GARFISH_ANALYSIS.md` 文档中，以便团队共享和后续复用。

3.  **优先查阅官方示例**: 在使用任何第三方库（包括 Garfish 的 API）时，必须先查找并参考其官方文档或使用示例，理解其设计意图和正确用法后，再进行代码的添加或修改。

4.  **日志埋点**: 当遇到难以追踪的复杂场景（如依赖共享、上下文传递等问题）时，允许通过在业务代码和 `node_modules` 中的第三方库（编译后的文件）中添加临时性的日志埋点（`console.log`）来进行深度分析。

5.  **同步更新设计文档**: 当对微前端（MF）的架构设计做出任何变动时（例如修改加载方式、依赖共享策略等），必须同步更新 `docs/MF_DESIGN.md` 设计文档，确保其内容与当前实现保持一致。

6.  **日志文件追加原则**: 在更新任何日志或调试记录文件（如 `DEBUGGING_JOURNEY.md`）时，**必须始终以追加（Append）的方式添加新内容**，严禁覆盖（Overwrite）整个文件，以保留完整的历史记录。
